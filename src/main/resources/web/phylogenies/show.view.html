{{ title = "Phylogeny" }}
{{include "../layouts/header.view.html"}}

<div id="page-content">
  <div class="container">

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{routeUrl("phylogenies_index",{})}}">Phylogenies</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{tree.name}}</li>
      </ol>
    </nav>

    <h1>{{tree.name}}</h1>
    {{if tree.deprecated}}
      <div class="alert alert-warning" role="alert">
        <i class="fas fa-exclamation-triangle"></i> This phylogeny is depracated. Please use it only for reproducibility.
      </div>
    {{end}}
    <p>{{tree.description}}</p>
    <p>
      <b>Clades ({{clades.size()}}):</b><br>
      {{for clade in clades}}
        <a class="badge badge-primary" href="{{routeUrl("clades_show", {phylotree:tree.id, clade:clade.toString()})}}">{{clade}}</a>
      {{end}}
    </p>
    <p><small class="text-muted"><i class="far fa-clock"></i> Last Update: {{tree.lastUpdate}}&nbsp;&nbsp;<a href="{{tree.url}}"><i class="fab fa-github"></i> View on GitHub</a></small></p>
    <br>
    <div class="card" style="width: 100%; height: 600px">
      <div class="card-body">
        <h5 class="card-title">Phylogenetic Tree</h5>
    <div id="graph">
      </div>
    </div>
  </div>
    <br><br>
    <p><b>Data Source: </b></p>
    <ul>
      {{for source in tree.source}}
        <li>{{source}}</li>
      {{end}}
    </ul>
  </div>
</div>

<script>
  d3.select("#graph")
.graphviz().width('100%').height('500px').fit(true)
.renderDot('{{dotGraph}}');
</script>

{{include "../layouts/footer.view.html"}}
