# Installation and Usage

Haplogrep is tree-independent and provides a plugin system to connect different phylogenetic trees with the software.

## Install Trees
Haplogrep includes 3 trees (Phylotree 17 rCRS and RSRS, Phylotree Forensic Update) by default.
To install one of our other available trees, enter the following command:
```
./haplogrep3 install-tree phylotree-rcrs@16.0
```

Please have a list of all [available trees](https://genepi.github.io/haplogrep-trees) and commands to install them.

## Tree Structure
All trees are publicly available on GitHub and consists of the following files:

* A makefile to build the latest version automatically.
* A YAML file including all required metadata (e.g. name, URL, last update) and links to the required files (e.g. phylogenetic tree, nomenclature rules, hotspots)  
* All files linked in the YAML file. The repository includes the phylogentic tree in XML format, the mutations weights, nomenclature rules and the amino acid changes files.
* Required reference files for FASTA alignment. For each reference in fasta format, the files generated by `bwa index` are required. Additionally, a `*dict` file is required.

Please have a look at [the Phylotree 17 rCRS repository](https://github.com/genepi/phylotree-rcrs-17/) to see the definition of a tree.

## Add trees
You can integrate your own trees, by setting up a repository similar to [this one](https://github.com/genepi/phylotree-rcrs-17/) and add the following command:
```
./haplogrep3 install-tree phylotree-rcrs-15/blob/main/src/tree.yaml
```

## Share trees
To share trees, you can either add the tree [to our meta repository](https://github.com/genepi/haplogrep-trees) or set up your own repository. To set up your own repository, adapt the `haplogrep3.yaml` file as follows:

```
repositories:
  - https://raw.githubusercontent.com/genepi/haplogrep-trees/main/trees.json
  - https://raw.githubusercontent.com/<name>/<reponame>/main/trees.json

```

This setup would then allow you to install trees like this:
```
./haplogrep3 install-tree my-new-tree@1.0
```
